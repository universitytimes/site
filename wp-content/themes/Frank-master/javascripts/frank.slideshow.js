// Generated by CoffeeScript 1.3.3
/*global
*/var FSS;FSS=function(){function o(e,t){this.element=e;Object.prototype.toString.call(t)==="[object Object]"?this.options=t:this.options={};this.init();this.gotoslide(0);this.autoplay&&this.play()}var e,t,n,r,i,s;o.prototype.pause=function(){clearTimeout(this.interval)};o.prototype.play=function(){clearTimeout(this.interval);this.interval=setTimeout(e,this.duration,this)};o.prototype.next=function(){var e;e=this.currentIndex<this.slides.length-1?this.currentIndex+1:0;this.gotoslide(e)};o.prototype.gotoslide=function(e){var t,n;if(this.currentIndex===e)return;t=this.element.parentNode.querySelector(".visible");if(t&&t===this.slideA){this.slideB.style.backgroundPosition="0px "+String(this.options.height*e*-1)+"px";this.slideA.className=this.slideA.className.replace(new RegExp("(\\s|^)visible(\\s|$)"),"");this.slideB.className+=" visible"}else{this.slideA.style.backgroundPosition="0px "+String(this.options.height*e*-1)+"px";this.slideB.className=this.slideB.className.replace(new RegExp("(\\s|^)visible(\\s|$)"),"");this.slideA.className+=" visible"}t=this.navigation.querySelector(".active");t&&t.removeAttribute("class");t=document.createAttribute("class");t.nodeValue="active";this.navigation.childNodes.item(e).setAttributeNode(t);n=this.currentIndex===-1?0:this.currentIndex;this.slides[n].el.className=this.slides[n].el.className.replace(new RegExp("(\\s|^)active(\\s|$)"),"");this.slides[e].el.className+=" active";this.currentIndex=e};o.prototype.init=function(){var e,n,o,u,a,f,l,c,h;n=this;this.options.width||(this.options.width=this.element.offsetWidth);this.options.height||(this.options.height=this.element.offsetHeight);this.autoplay=!0;this.duration=5e3;this.currentIndex=-1;this.element.className.match(new RegExp("(\\s|^)fss(\\s|$)"))||(this.element.className+=" fss");this.caption=this.element.querySelector(".captions");if(!this.caption)return;e=this.caption.firstChild;a=0;this.slides=[];while(e){e&&e.nodeType!==3&&this.slides.push({ndx:a++,el:e});e=e.nextSibling}this.container=t("div","slide-container");this.slideA=t("div","slide-a visible");this.slideB=t("div","slide-b");this.element.insertBefore(this.container,this.caption);this.container.appendChild(this.slideA);this.container.appendChild(this.slideB);this.slideA.style.width=this.slideB.style.width=this.options.width+"px";this.slideA.style.height=this.slideB.style.height=this.options.height+"px";this.navigation=t("ul","fss-nav");h=this.slides;for(o=l=0,c=h.length;l<c;o=++l){f=h[o];u=t("li");u.appendChild(document.createTextNode(String(o+1)));this.navigation.appendChild(u);u.onclick=s(u,this)}this.container.appendChild(this.navigation);this.container.onmouseover=function(e){return i(e,n)};this.container.onmouseout=function(e){return r(e,n)}};t=function(e,t){var n,r;r=document.createElement(e);if(!t)return r;n=document.createAttribute("class");n.nodeValue=t;r.setAttributeNode(n);return r};n=function(e,t){if(e===t)return!1;while(e&&e!==t)e=e.parentNode;return e===t};e=function(e){if(!e)return;e.next();e.play()};s=function(e,t){return function(){var n;t.pause();n=0;while(t.navigation.childNodes.item(n)){if(t.navigation.childNodes.item(n)===e){t.gotoslide(n);return}n++}}};i=function(e,t){if(!e)return;if(!n(e.target,t.container)){e.cancelBubble=!0;e.stopPropagation();return!1}t.pause();t.navigation.className.match(new RegExp("(\\s|^)active(\\s|$)"))||(t.navigation.className+=" active")};r=function(e,t){if(n(e.relatedTarget,t.container)){e.cancelBubble=!0;e.stopPropagation();return!1}t.play();t.navigation.className.match(new RegExp("(\\s|^)active(\\s|$)"))&&(t.navigation.className=t.navigation.className.replace(new RegExp("(\\s|^)active(\\s|$)"),""))};return o}();